% !TEX encoding   = UTF8
% !TEX spellcheck = ru_RU
% !TEX root = ../seminars.tex

%%==================================================
\chapter{Графическое представление функций и данных}
%%==================================================

%%==========================================
\section{Улучшение класса \texttt{Function}}
%%==========================================
Представим вариант выполнения упражения~2 из~\textbookref{главы~15}.

\cppfile[firstline=11, lastline=29]{projects/ch15/function.cpp}

Первый раз основную работу по~вычислению и сохранению точек выполняет конструктор базового класса \code{Function}. Нам остаётся сохранить параметры, задающие вид кривой:

\cppfile[firstline=31, lastline=36]{projects/ch15/function.cpp}

Метод \code{move()} перекрывает \code{Shape::move()}, чтобы сдвинуть начало координат для~правильного вычисления точек кривой, если будут внесены какие-либо дополнительные изменения (форма кривой, диапазон рисования, и т.\,д.):

\cppfile[firstline=38, lastline=43]{projects/ch15/function.cpp}

Следующие функции позволяют пользователю изменить вид кривой:

\cppfile[firstline=45, lastline=64]{projects/ch15/function.cpp}

Основную работу при~этом выполняет закрытая функция \code{redistribute()}, которая вычисляет точки кривой заново:

\cppfile[firstline=66, lastline=75]{projects/ch15/function.cpp}

Заметим, что хранение точек в~классе \code{Shape} (подобно тому, как это делает \code{Graph\_}\-\code{lib::Function}) не~позволяет нам уменьшить их количество. По~этой причине мы не~предоставляем пользователю возможность изменять число точек.

Как и всегда, необходимо протестировать новые возможности, например, так:

\cppfile[firstline=116, lastline=133]{projects/ch15/function.cpp}



%%===================
\input{ch15/functors}
%%===================



%%================
\WhatToReadSection
%%================
\textcite{Stroustrup:2016:ru}: \textbf{глава~16}



%%===============
\ExercisesSection
%%===============
\begin{exercise}
\item Выполните упражнения из \textbookref{главы~15} учебника.

\end{exercise}
